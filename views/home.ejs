<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URL Shortern</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ysabeau:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;500&display=swap" rel="stylesheet">


  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-center">
          <h1 style="font-family: 'Ysabeau', sans-serif; font-weight: 600">
            URL Shortern
          </h1>
        </div>
      </div>

      <form action="/create" 
          method="POST"
          
          style="font-family: 'Ysabeau', sans-serif; font-weight: 400">

      <div class="row">
        <div class="col-lg-12 text-center">
          
            <div class="input-group mb-3">
              <input
                name="longUrl"
                type="text"
                class="form-control"
                id="longUrl"
                aria-describedby="emailHelp"
                placeholder="Place your Long URL"
              />

              <div class="input-group-append">
                <button type="submit" class="btn btn-danger">Submit</button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <div class="row">
        <% for(let i=0; i< urlRes.length; i++) { %>
        <div class="col-lg-3">
          <div
            class="card text-bg-dark mb-3"
            style="
              max-width: 24rem;
              font-family: 'Ysabeau', sans-serif;
              font-weight: 400;
              border: none;
            "
          >
            <div
              style="font-family: 'Ysabeau', sans-serif; font-weight: 700"
              class="card-header text-bg-success"
            >
            <%= new URL(urlRes[i].longUrl).hostname %>
            </div>
            <div class="card-body">
              <h5 class="card-title">
                <a href="http://localhost:3000/<%=urlRes[i].shortUrl %>" target="_blank"> http://localhost:3000/<%=urlRes[i].shortUrl %> </a>
              </h5>
              <p class="card-text">
                <%=urlRes[i].longUrl %>
              </p>
              <p class="card-text">
                Website: <span id="siteName<%=i%>"></span>
                <script>
                   const url = new URL('<%=urlRes[i].longUrl%>');
                   const siteName = url.hostname;
                   document.querySelector('#siteName<%=i%>').textContent = siteName;
                </script>
             </p>
            </div>
            <div class="card-footer text-bg-warning d-flex justify-content-between align-items-center">
                <small style="font-family: 'Josefin Sans', sans-serif; font-weight: 500" class="text-body-secondary">Total Clicks : <%= urlRes[i].click %> </small>
                <a href="/del/<%= urlRes[i].id %>">
                <button class="btn btn-danger">Del</button></a>
              </div>
              
          
          </div>
        </div>
    <%} %>
        
      </div>
    </div>
  </body>
</html>
